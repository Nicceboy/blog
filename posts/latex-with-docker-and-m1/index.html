<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OCI containers, Arch Linux ARM and LaTeX on Apple Silicon | A blog about computer systems</title><meta name=keywords content="containers,docker,mac,arm,latex,oci"><meta name=description content="Building and using ARM-based OCI images on Apple Silicon from scratch"><meta name=author content="Niklas Saari"><link rel=canonical href=https://nicce.dev/posts/latex-with-docker-and-m1/><link crossorigin=anonymous href=/assets/css/stylesheet.7d6eabb74b8a498aa567dd65953e458b09ff6702f7850f740b6ee7562cbd4251.css integrity="sha256-fW6rt0uKSYqlZ91llT5Fiwn/ZwL3hQ90C27nViy9QlE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nicce.dev/images/binary.svg><link rel=icon type=image/png sizes=16x16 href=https://nicce.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nicce.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://nicce.dev/images/binary.svg><link rel=mask-icon href=https://nicce.dev/images/binary.svg><meta name=theme-color content="#fff" media="(prefers-color-scheme: light)"><meta name=theme-color content="#1d1e20" media="(prefers-color-scheme: dark)"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="OCI containers, Arch Linux ARM and LaTeX on Apple Silicon "><meta property="og:description" content="Building and using ARM-based OCI images on Apple Silicon from scratch"><meta property="og:type" content="article"><meta property="og:url" content="https://nicce.dev/posts/latex-with-docker-and-m1/"><meta property="og:image" content="https://nicce.dev/posts/latex-with-docker-and-m1/latex.svg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-11T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-11T00:00:00+00:00"><meta property="og:site_name" content="Nicce's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nicce.dev/posts/latex-with-docker-and-m1/latex.svg"><meta name=twitter:title content="OCI containers, Arch Linux ARM and LaTeX on Apple Silicon "><meta name=twitter:description content="Building and using ARM-based OCI images on Apple Silicon from scratch"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nicce.dev/posts/"},{"@type":"ListItem","position":2,"name":"OCI containers, Arch Linux ARM and LaTeX on Apple Silicon ","item":"https://nicce.dev/posts/latex-with-docker-and-m1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OCI containers, Arch Linux ARM and LaTeX on Apple Silicon ","name":"OCI containers, Arch Linux ARM and LaTeX on Apple Silicon ","description":"Building and using ARM-based OCI images on Apple Silicon from scratch","keywords":["containers","docker","mac","arm","latex","oci"],"articleBody":"Since the release of Apple’s M1 Chips, ARM architecture has expanded to a larger user base. The power efficiency and performance of the new chips have made them quite desirable. Unfortunately, most of the existing developer-required toolchains were for x86_64 architecture in many cases.\nThis blog post introduces a brief overview of how to set up a container runner on your ARM Macbook and how to create an AArch64 Open Container Initiative (OCI) container image from the scratch. The example builds TexLive for LaTeX since I could not find an existing up-to-date image after I sold my soul to the devil by getting M2 Chip.\nThere might be simpler ways to build LaTeX documents on your Macbook, but this gives us the most control in a reproducible environment!\nSetting up container runner There are already quite many options to run OCI containers even on ARM. The obvious choice would be Docker Desktop on Mac, but we don’t want yet-another Chromium instance to consume battery.\nThere are options, but they are all QEMU based since containers are based on Linux:\nColima as a minimal CLI-based daemon (containerd/dockerd) with Lima Finch as AWS backed, aims to bring native client on MacOS for nerdctl and containerd Podman (No daemon,based on libpod) Podman Desktop (No daemon, based on libpod) Rancher (containerd/dockerd and Lima) ","wordCount":"219","inLanguage":"en","image":"https://nicce.dev/posts/latex-with-docker-and-m1/latex.svg","datePublished":"2023-02-11T00:00:00Z","dateModified":"2023-02-11T00:00:00Z","author":{"@type":"Person","name":"Niklas Saari"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nicce.dev/posts/latex-with-docker-and-m1/"},"publisher":{"@type":"Organization","name":"A blog about computer systems","logo":{"@type":"ImageObject","url":"https://nicce.dev/images/binary.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicce.dev/ accesskey=h title="Home (Alt + H)"><img src=https://nicce.dev/images/binary.svg alt aria-label=logo height=25>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicce.dev/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://nicce.dev/tags/ title=Categories><span>Categories</span></a></li><li><a href=https://nicce.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://nicce.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OCI containers, Arch Linux ARM and LaTeX on Apple Silicon</h1><div class=post-description>Building and using ARM-based OCI images on Apple Silicon from scratch</div><div class=post-meta><span title='2023-02-11 00:00:00 +0000 UTC'>February 11, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;219 words&nbsp;·&nbsp;Niklas Saari&nbsp;|&nbsp;<a href=https://github.com/Nicceboy/blog/tree/master/content/posts/latex-with-docker-and-m1/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://nicce.dev/posts/latex-with-docker-and-m1/latex.svg alt></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#setting-up-container-runner>Setting up container runner</a></li></ul></nav></div></details></div><div class=post-content><p>Since the release of Apple&rsquo;s M1 Chips, ARM architecture has expanded to a larger user base.
The power efficiency and performance of the new chips have made them quite desirable.
Unfortunately, most of the existing developer-required toolchains were for x86_64 architecture in many cases.</p><p>This blog post introduces a brief overview of how to set up a container runner on your ARM Macbook and how to create an AArch64 <a href=https://opencontainers.org/about/overview/>Open Container Initiative (OCI)</a> container image from the scratch.
The example builds TexLive for LaTeX since I could not find an existing up-to-date image after I sold my soul to the devil by getting M2 Chip.</p><p>There <strong>might</strong> be simpler ways to build LaTeX documents on your Macbook, but this gives us the most control in a reproducible environment!</p><h2 id=setting-up-container-runner>Setting up container runner<a hidden class=anchor aria-hidden=true href=#setting-up-container-runner>#</a></h2><p>There are already quite many options to run OCI containers even on ARM.
The obvious choice would be <a href=https://docs.docker.com/desktop/install/mac-install/><em>Docker Desktop on Mac</em></a>, but we don&rsquo;t want yet-another Chromium instance to consume battery.</p><p>There are options, but they are all QEMU based since containers are based on Linux:</p><ul><li><a href=https://github.com/abiosoft/colima>Colima</a> as a minimal CLI-based daemon (containerd/dockerd) with <a href=https://github.com/lima-vm/lima>Lima</a></li><li><a href=https://github.com/runfinch/finch>Finch</a> as <a href=https://aws.amazon.com/blogs/opensource/introducing-finch-an-open-source-client-for-container-development/>AWS</a> backed, aims to bring native client on MacOS for nerdctl and containerd</li><li><a href=https://podman.io/getting-started/installation>Podman</a> (No daemon,based on libpod)</li><li><a href=https://podman-desktop.io/>Podman Desktop</a> (No daemon, based on libpod)</li><li><a href=https://rancherdesktop.io/>Rancher</a> (containerd/dockerd and Lima)</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://nicce.dev/tags/containers/>containers</a></li><li><a href=https://nicce.dev/tags/docker/>docker</a></li><li><a href=https://nicce.dev/tags/mac/>mac</a></li><li><a href=https://nicce.dev/tags/arm/>arm</a></li><li><a href=https://nicce.dev/tags/latex/>latex</a></li><li><a href=https://nicce.dev/tags/oci/>oci</a></li></ul><nav class=paginav><a class=next href=https://nicce.dev/posts/running-your-favorite-windows-games-on-linux-containers/><span class=title>Next »</span><br><span>Running Your Favorite Windows Games on Linux Containers</span></a></nav></footer></article></main><footer class=footer><span>© 2023 Niklas Saari</span>
<span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>