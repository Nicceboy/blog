<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Running Your Favorite Windows Games on Linux Containers | Curiosity dooms us</title><meta name=keywords content="containers,docker,linux,windows"><meta name=description content="Gaming on Linux can be simple."><meta name=author content="Niklas Saari"><link rel=canonical href=https://canonical.url/to/page><link crossorigin=anonymous href=/assets/css/stylesheet.2e039021c29690d4196605d36e1835d7fd7afa0a513e2bc8224fab114555b930.css integrity="sha256-LgOQIcKWkNQZZgXTbhg11/16+gpRPivIIk+rEUVVuTA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nicce.dev/images/binary.svg><link rel=icon type=image/png sizes=16x16 href=https://nicce.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nicce.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://nicce.dev/images/binary.svg><link rel=mask-icon href=https://nicce.dev/images/binary.svg><meta name=theme-color content="#ffffff" media="(prefers-color-scheme: light)"><meta name=theme-color content="#1d1e20" media="(prefers-color-scheme: dark)"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Running Your Favorite Windows Games on Linux Containers"><meta property="og:description" content="Gaming on Linux can be simple."><meta property="og:type" content="article"><meta property="og:url" content="https://nicce.dev/posts/2021-02-24-running-your-favorite-windows-games-on-linux-containers/"><meta property="og:image" content="https://nicce.dev/images/preview_mtg_container.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-24T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-24T00:00:00+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nicce.dev/images/preview_mtg_container.png"><meta name=twitter:title content="Running Your Favorite Windows Games on Linux Containers"><meta name=twitter:description content="Gaming on Linux can be simple."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nicce.dev/posts/"},{"@type":"ListItem","position":2,"name":"Running Your Favorite Windows Games on Linux Containers","item":"https://nicce.dev/posts/2021-02-24-running-your-favorite-windows-games-on-linux-containers/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Running Your Favorite Windows Games on Linux Containers","name":"Running Your Favorite Windows Games on Linux Containers","description":"Gaming on Linux can be simple.","keywords":["containers","docker","linux","windows"],"articleBody":"There was a moment in one weekend when I wanted to play one Windows game on my laptop, but unfortunately, I am using Linux with integrated Intel graphics and that does not sound too promising.\nThe other repelling thought proved to be the amount of dependencies I would need that I am able to play this game on Wine. I would like to maintain my system as whole and get rid of unnecessary stuff later on, somewhat easily. Virtualization is not option, as I have already weak performance.\nHowever, there is another, bit more lightweight solution; containers, especially OCI or Docker containers. So instead of playing the game a bit, I ended up spending a weekend for installing it. In the end, it seemed to be possible. On top of wrapping all the software on single container, games are executed at least in a bit more isolated matter. If I ever want to get same environment back again, I could just pull single Docker image.\n{{ /* \u003c figure src=\"/images/preview_mtg_container.png\" title=“Magic The Gathering: Arena works well when played from the Linux container” alt=“Testing MTGArena on container.” */ \u003e}}\nThis article expects, that you are already familiar with containers.\nGitHub repository with source code is available here.\nChallenges Traditional container applications are in the most of the cases CLI based, not making sound and rarely needing hardware acceleration or GPUs. This brings more requirements for containers, when we are talking about games:\nSound support\nDisplay support\nGPU/Hardware acceleration\nWhat this means in practice, is that container needs more access into host system resources and applications.\nSound PulseAudio is one of the most used sound servers in the Linux world for generic purpose. It is probably already on your machine. Jack is used more for professionals and left out of scope. PipeWire might be the future.\nIf you don’t have it already, for Debian you can install it for example with following command. It might be better to skip this, if you don’t know how to make it as your primary server if you have another one already.\napt-get update \u0026\u0026 apt-get install pulseaudio\nTo get some sound from the container for your host machine speakers, one way is to grant access for PulseAudio server running on your host machine. To achieve this, PulseAudio must be configured to provide accessible Unix socket.\nLook for user-specific Pulse configuration file in path:\ncat \"${HOME}/.config/pulse/default.pa\"\nModify or create the file with following contents:\n.include /etc/pulse/default.pa load-module module-native-protocol-unix socket=/tmp/pulse-socket After applying changes, server should be restarted:\npulseaudio -k pulseaudio --start pulseaudio --check Now, when we have also container with PulseAudio installed, we can share this socket as read-only volume into container. To make container to use this socket, it should be configured as well; modify file in the same path as before inside container to contain:\n# Use host socket default-server = unix:/tmp/pulse-socket enable-shm = false # Prevent container from running server autospawn = no daemon-binary = /bin/true # Returns true but does nothing However, Pulse server requires authentication, and this is applied with magic cookies, if we are not granting anonymous access. Anonymous access can be allowed by adding auth-anonymous=1 just before socket definition on host configuration file.\nNon-anonymous access requires copying the cookies each time container is executed from the host path “${HOME}/.config/pulse/cookie” into same destination path in container. Sounds should be working now.\nDisplay There are two main display servers; X.org and Wayland. X.org is beginning to reach its end of life, but still most of the applications are only supporting it.\nTo make X applications to work under containers, we need to share Unix socket as read-only volume again, this time in the path /tmp/.X11-unix .\nAdditionally, environment value of $DISPLAY must be shared into container, to tell location of the display.\nIn general, granting access to host machine’s X server is considered dangerous, as content and key presses can be manipulated and seen. X11docker project attempts to solve some of these problems.\nWe can limit access for this specific container with similar way than with sound; copying magic cookies into container when it is executed.\nHexadecimal key can be acquired with xauth tool:\nxauth list workstation/unix: MIT-MAGIC-COOKIE-1 f57d6fbab111c34b56efb04776e52229 Inside container as root, display can be then added as:\nxauth add “$DISPLAY” . This will generate .Xauthority file, which should be copied for correct user as well. Note, that variables have been predefined manually.\ncp /root/.Xauthority \"${USER_HOME}\" chown \"${USER_UID}\":\"${USER_GID}\" \"${USER_HOME}/.Xauthority\" NOTE: When running XWayland compositor (Wayland support for X), it seems that UID of Docker user in container must be same than in the owner of host X server. Otherwise there are not enough permissions. This has impact for the level of isolation.\nPure Wayland applications are yet to be tested, but should not take much more effort.\nGraphic cards and hardware acceleration There was a time when this sounded complicated problem for me, but it was simple after all.\nAll what you need to do, is to share graphic cards as devices, and install drivers!\nGraphic cards are usually found from the path /dev/dri . They can be passed as devices into container. To install drivers, you must find suitable packages.\nOn Debian based system, you can install AMD and Intel based drivers with Vulkan support by getting following packages:\ndpkg --add-architecture i386 \u0026\u0026 \\ # Get 32-bit support as well apt-get update \u0026\u0026 apt-get install vulkan-utils \\ mesa-vulkan-drivers \\ mesa-vulkan-drivers:i386 \\ libvulkan1 \\ libvulkan1:i386 \\ libglx-mesa0 \\ libgl1-mesa-dri Vulkan is required to boost performance especially of DirectX 11 applications, when running Windows games in Wine. There is project called as dxvk which attempts to make transitions from DirectX into Vulkan.\nIf everything is good in you container, running command vulkaninfo should tell information about your graphic card. With command vkcube you should get spinning 3D cube.\nManaging games and runners on Linux There is one big open-source project just for this; Lutris is trying to simplify it all. I decided to try it for managing Wine and dxvk runner versions and for managing game installations. It was installed into container as well.\nDependencies of Lutris can be installed for Debian based system as follows:\necho \"deb http://download.opensuse.org/repositories/home:/strycore/Debian_10/ ./\" | tee /etc/apt/sources.list.d/lutris.list \\ \u0026\u0026 wget -q https://download.opensuse.org/repositories/home:/strycore/Debian_10/Release.key -O- | apt-key add - \\ \u0026\u0026 apt-get update \\ \u0026\u0026 apt-get -y install lutris Latest client can be installed from GitHub releases:\nmkdir -p /tmp/lutris \u0026\u0026 \\ curl -s https://api.github.com/repos/lutris/lutris/releases/latest \u003e /tmp/lutris/version.json \u0026\u0026 \\ jq \".tarball_url\" /tmp/lutris/version.json | xargs curl -Lo /tmp/lutris/lutris \u0026\u0026 \\ mkdir -p /opt/lutris \u0026\u0026 \\ tar -C /opt/lutris --strip-components 1 -xf /tmp/lutris/lutris \u0026\u0026 \\ rm -rf /tmp/lutris Client will end up into path /opt/lutris/bin/lutris .\nAll additional data will be installed into container’s user home directory. To make is sustainable after stopping containers, it is mounted as named volume into host system. Environment and all the packages can change, but this data can be saved even if deleting all Docker images and containers.\nThe one specific game I wanted to play was Magic The Gathering: Arena. There is pre-made installation script in Lutris already, which installs some dependencies game is requiring, such as .NET Framework 4.8.\nGame has been running smoothly on my machine so far, with Vulkan transitions after little tweaking of dxvk versions. However, functionality of other games depends heavily on sufficient Wine features.\nConclusion In the end, I made Python script and specific Docker image to automate most of the requirements and it is available at GitHub in here. It will create required named volume of game data ($HOME directory of user) and sets environment up. Docker image has been pre-built and can be pulled with command\ndocker pull ghcr.io/nicceboy/lutris-vulkan:latest\nPython script will launch the Lutris client from container after setting up environment. As manual step, PulseAudio should be configured beforehand.\nScript can be installed as package as\npip install git+https://github.com/Nicceboy/gamify-containers\nLutris can be finally started\nplaylutris --detach\nAt this point, I had already installed the game before, and game data is visible from mounted volume.\nIn my case, I did not make any performance measurements to see impact from container usage. Game was still very playable and therefore I did not bother with that.\n","wordCount":"1360","inLanguage":"en","image":"https://nicce.dev/images/preview_mtg_container.png","datePublished":"2021-02-24T00:00:00Z","dateModified":"2021-02-24T00:00:00Z","author":{"@type":"Person","name":"Niklas Saari"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nicce.dev/posts/2021-02-24-running-your-favorite-windows-games-on-linux-containers/"},"publisher":{"@type":"Organization","name":"Curiosity dooms us","logo":{"@type":"ImageObject","url":"https://nicce.dev/images/binary.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicce.dev/ accesskey=h title="Home (Alt + H)"><img src=https://nicce.dev/images/binary.svg alt aria-label=logo height=25>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicce.dev/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://nicce.dev/tags/ title=Categories><span>Categories</span></a></li><li><a href=https://nicce.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://nicce.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Running Your Favorite Windows Games on Linux Containers</h1><div class=post-description>Gaming on Linux can be simple.</div><div class=post-meta><span title='2021-02-24 00:00:00 +0000 UTC'>February 24, 2021</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1360 words&nbsp;·&nbsp;Niklas Saari&nbsp;|&nbsp;<a href=https://github.com/Nicceboy/blog/content/posts/2021-02-24-Running-your-favorite-Windows-games-on-Linux-containers.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://nicce.dev/images/preview_mtg_container.png alt="Testing MTGArena on container."><p>Magic The Gathering: Arena works well when played from the Linux container.</p></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#challenges>Challenges</a><ul><li><a href=#sound>Sound</a></li><li><a href=#display>Display</a></li><li><a href=#graphic-cards-and-hardware-acceleration>Graphic cards and hardware acceleration</a></li></ul></li><li><a href=#managing-games-and-runners-on-linux>Managing games and runners on Linux</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>There was a moment in one weekend when I wanted to play one Windows game on my laptop, but unfortunately, I am using Linux with integrated Intel graphics and that does not sound too promising.</p><p>The other repelling thought proved to be the amount of dependencies I would need that I am able to play this game on <a href=https://www.winehq.org/>Wine</a>. I would like to maintain my system as whole and get rid of unnecessary stuff later on, somewhat easily. Virtualization is not option, as I have already weak performance.</p><p>However, there is another, bit more lightweight solution; containers, especially OCI or Docker containers. So instead of playing the game a bit, I ended up spending a weekend for installing it. In the end, it seemed to be possible. On top of wrapping all the software on single container, games are executed at least in a bit more isolated matter. If I ever want to get same environment back again, I could just pull single Docker image.</p><p>{{ /* &lt; figure src="/images/preview_mtg_container.png" title=&ldquo;Magic The Gathering: Arena works well when played from the Linux container&rdquo; alt=&ldquo;Testing MTGArena on container.&rdquo; */ >}}</p><p>This article expects, that you are already familiar with containers.</p><p>GitHub repository with source code is available <a href=https://github.com/Nicceboy/gamify-containers>here.</a></p><h2 id=challenges>Challenges<a hidden class=anchor aria-hidden=true href=#challenges>#</a></h2><p>Traditional container applications are in the most of the cases CLI based, not making sound and rarely needing hardware acceleration or GPUs. This brings more requirements for containers, when we are talking about games:</p><ul><li><p>Sound support</p></li><li><p>Display support</p></li><li><p>GPU/Hardware acceleration</p></li></ul><p>What this means in practice, is that container needs more access into host system resources and applications.</p><h3 id=sound>Sound<a hidden class=anchor aria-hidden=true href=#sound>#</a></h3><p><a href=https://www.freedesktop.org/wiki/Software/PulseAudio/>PulseAudio</a> is one of the most used sound servers in the Linux world for generic purpose. It is probably already on your machine. Jack is used more for professionals and left out of scope. <a href=https://pipewire.org/>PipeWire</a> might be the future.</p><p>If you don’t have it already, for Debian you can install it for example with following command. It might be better to skip this, if you don’t know how to make it as your primary server if you have another one already.</p><p><code>apt-get update && apt-get install pulseaudio</code></p><p>To get some sound from the container for your host machine speakers, one way is to grant access for PulseAudio server running on your host machine. To achieve this, PulseAudio must be configured to provide accessible Unix socket.</p><p>Look for user-specific Pulse configuration file in path:</p><p><code>cat "${HOME}/.config/pulse/default.pa"</code></p><p>Modify or create the file with following contents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>.include /etc/pulse/default.pa
</span></span><span class=line><span class=cl>load-module module-native-protocol-unix <span class=nv>socket</span><span class=o>=</span>/tmp/pulse-socket
</span></span></code></pre></div><p>After applying changes, server should be restarted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pulseaudio -k
</span></span><span class=line><span class=cl>pulseaudio --start
</span></span><span class=line><span class=cl>pulseaudio --check
</span></span></code></pre></div><p>Now, when we have also container with PulseAudio installed, we can share this socket as read-only volume into container. To make container to use this socket, it should be configured as well; modify file in the same path as before inside container to contain:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># Use host socket</span>
</span></span><span class=line><span class=cl>default-server <span class=o>=</span> unix:/tmp/pulse-socket
</span></span><span class=line><span class=cl>enable-shm <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=c1># Prevent container from running server</span>
</span></span><span class=line><span class=cl><span class=nv>autospawn</span> <span class=o>=</span> no
</span></span><span class=line><span class=cl>daemon-binary <span class=o>=</span> /bin/true <span class=c1># Returns true but does nothing</span>
</span></span></code></pre></div><p>However, Pulse server requires authentication, and this is applied with <a href=https://wiki.archlinux.org/index.php/PulseAudio/Configuration#Connection_&_authentication>magic cookies</a>, if we are not granting anonymous access. Anonymous access can be allowed by adding auth-anonymous=1 just before socket definition on host configuration file.</p><p>Non-anonymous access requires copying the cookies each time container is executed from the host path “${HOME}/.config/pulse/cookie” into same destination path in container. Sounds should be working now.</p><h3 id=display>Display<a hidden class=anchor aria-hidden=true href=#display>#</a></h3><p>There are two main display servers; X.org and Wayland. X.org is beginning to reach its end of life, but still most of the applications are only supporting it.</p><p>To make X applications to work under containers, we need to share Unix socket as read-only volume again, this time in the path /tmp/.X11-unix .</p><p>Additionally, environment value of $DISPLAY must be shared into container, to tell location of the display.</p><p>In general, granting <strong>access to host machine’s X server is considered dangerous</strong>, as content and key presses can be manipulated and seen. <a href=https://github.com/mviereck/x11docker>X11docker project</a> attempts to solve some of these problems.</p><p>We can limit access for this specific container with similar way than with sound; copying magic cookies into container when it is executed.</p><p>Hexadecimal key can be acquired with xauth tool:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>xauth list                
</span></span><span class=line><span class=cl>workstation/unix:  MIT-MAGIC-COOKIE-1  f57d6fbab111c34b56efb04776e52229
</span></span></code></pre></div><p>Inside container as root, display can be then added as:</p><p><code>xauth add “$DISPLAY” . &lt;key></code></p><p>This will generate .Xauthority file, which should be copied for correct user as well. Note, that variables have been predefined manually.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cp /root/.Xauthority <span class=s2>&#34;</span><span class=si>${</span><span class=nv>USER_HOME</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>chown <span class=s2>&#34;</span><span class=si>${</span><span class=nv>USER_UID</span><span class=si>}</span><span class=s2>&#34;</span>:<span class=s2>&#34;</span><span class=si>${</span><span class=nv>USER_GID</span><span class=si>}</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>USER_HOME</span><span class=si>}</span><span class=s2>/.Xauthority&#34;</span>
</span></span></code></pre></div><p><strong>NOTE:</strong> When running XWayland compositor (Wayland support for X), it seems that UID of Docker user in container must be same than in the owner of host X server. Otherwise there are not enough permissions. This has impact for the level of isolation.</p><p>Pure Wayland applications are yet to be tested, but should not take much more effort.</p><h3 id=graphic-cards-and-hardware-acceleration>Graphic cards and hardware acceleration<a hidden class=anchor aria-hidden=true href=#graphic-cards-and-hardware-acceleration>#</a></h3><p>There was a time when this sounded complicated problem for me, but it was simple after all.</p><p>All what you need to do, is to share graphic cards as devices, and install drivers!</p><p>Graphic cards are usually found from the path /dev/dri . They can be passed as devices into container. To install drivers, you must find suitable packages.</p><p>On Debian based system, you can install AMD and Intel based drivers with Vulkan support by getting following packages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>dpkg --add-architecture i386 <span class=o>&amp;&amp;</span> <span class=se>\ </span><span class=c1># Get 32-bit support as well</span>
</span></span><span class=line><span class=cl>apt-get update <span class=o>&amp;&amp;</span> apt-get install vulkan-utils <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>mesa-vulkan-drivers <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>mesa-vulkan-drivers:i386 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>libvulkan1 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>libvulkan1:i386 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>libglx-mesa0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>libgl1-mesa-dri
</span></span></code></pre></div><p>Vulkan is required to boost performance especially of DirectX 11 applications, when running Windows games in Wine. There is project called as <a href=https://github.com/doitsujin/dxvk>dxvk</a> which attempts to make transitions from DirectX into Vulkan.</p><p>If everything is good in you container, running command vulkaninfo should tell information about your graphic card. With command vkcube you should get spinning 3D cube.</p><h2 id=managing-games-and-runners-on-linux>Managing games and runners on Linux<a hidden class=anchor aria-hidden=true href=#managing-games-and-runners-on-linux>#</a></h2><p>There is one big open-source project just for this; <a href=https://lutris.net/>Lutris </a>is trying to simplify it all. I decided to try it for managing Wine and dxvk runner versions and for managing game installations. It was installed into container as well.</p><p>Dependencies of Lutris can be installed for Debian based system as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;deb http://download.opensuse.org/repositories/home:/strycore/Debian_10/ ./&#34;</span> <span class=p>|</span> tee /etc/apt/sources.list.d/lutris.list <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=o>&amp;&amp;</span> wget -q https://download.opensuse.org/repositories/home:/strycore/Debian_10/Release.key -O- <span class=p>|</span> apt-key add - <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=o>&amp;&amp;</span> apt-get update <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span><span class=o>&amp;&amp;</span> apt-get -y install lutris
</span></span></code></pre></div><p>Latest client can be installed from GitHub releases:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir -p /tmp/lutris <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>curl -s https://api.github.com/repos/lutris/lutris/releases/latest &gt; /tmp/lutris/version.json <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>jq <span class=s2>&#34;.tarball_url&#34;</span> /tmp/lutris/version.json <span class=p>|</span> xargs curl -Lo /tmp/lutris/lutris <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>mkdir -p /opt/lutris <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>tar -C /opt/lutris --strip-components <span class=m>1</span> -xf /tmp/lutris/lutris <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>rm -rf /tmp/lutris
</span></span></code></pre></div><p>Client will end up into path <code>/opt/lutris/bin/lutris</code> .</p><p>All additional data will be installed into container’s user home directory. To make is sustainable after stopping containers, it is mounted as named volume into host system. Environment and all the packages can change, but this data can be saved even if deleting all Docker images and containers.</p><p>The one specific game I wanted to play was Magic The Gathering: Arena. There is pre-made installation script in Lutris already, which installs some dependencies game is requiring, such as .NET Framework 4.8.</p><p>Game has been running smoothly on my machine so far, with Vulkan transitions after little tweaking of dxvk versions. However, functionality of other games depends heavily on sufficient Wine features.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In the end, I made Python script and specific Docker image to automate most of the requirements and it is available at <a href=https://github.com/Nicceboy/gamify-containers>GitHub in here</a>. It will create required named volume of game data ($HOME directory of user) and sets environment up. Docker image has been pre-built and can be pulled with command</p><p><code>docker pull ghcr.io/nicceboy/lutris-vulkan:latest</code></p><p>Python script will launch the Lutris client from container after setting up environment. As manual step, PulseAudio should be configured beforehand.</p><p>Script can be installed as package as</p><p><code>pip install git+https://github.com/Nicceboy/gamify-containers</code></p><p>Lutris can be finally started</p><p><code>playlutris --detach</code></p><p><img loading=lazy src=https://cdn-images-1.medium.com/max/3428/1*yDApwAZGTMONUhI2yjeeUg.png alt></p><p>At this point, I had already installed the game before, and game data is visible from mounted volume.</p><p>In my case, I did not make any performance measurements to see impact from container usage. Game was still very playable and therefore I did not bother with that.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nicce.dev/tags/containers/>containers</a></li><li><a href=https://nicce.dev/tags/docker/>docker</a></li><li><a href=https://nicce.dev/tags/linux/>linux</a></li><li><a href=https://nicce.dev/tags/windows/>windows</a></li></ul></footer></article></main><footer class=footer><span>© 2022 Niklas Saari</span>
<span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>